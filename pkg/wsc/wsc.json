// wscæ¨¡å—é…ç½®æ–‡ä»¶
// æ¨¡å—åç§°: wsc
// åŒ…å: wsc  
// æè¿°: WebSocketé€šä¿¡æ¨¡å—
// ç”Ÿæˆæ—¶é—´: 2026-02-10 15:16:53
// æ³¨æ„: æ­¤æ–‡ä»¶ç”±é…ç½®ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆ

{
  "enabled": false,
  "network": "tcp4",
  "nodeIp": "0.0.0.0",
  "nodePort": 8080,
  "path": "/ws",
  "allowMultiLogin": true,
  "maxConnectionsPerUser": 3,
  "connectionPolicy": "kick_old",
  "sendKickNotification": true,
  "kickNotificationMsg": "æ‚¨çš„è´¦å·åœ¨å…¶ä»–è®¾å¤‡ç™»å½•",
  "heartbeatInterval": 30000000000,
  "performanceMetricsInterval": 300000000000,
  "ackCleanupInterval": 60000000000,
  "clientTimeout": 90000000000,
  "shutdownBaseTimeout": 5000000000,
  "shutdownMaxTimeout": 60000000000,
  "messageBufferSize": 256,
  "maxPendingQueueSize": 20000,
  "websocketOrigins": [
    "*"
  ],
  "readTimeout": 10000000000,
  "writeTimeout": 10000000000,
  "idleTimeout": 120000000000,
  "maxMessageSize": 512,
  "minRecTime": 2000000000,
  "maxRecTime": 60000000000,
  "recFactor": 1.5,
  "autoReconnect": true,
  "ackTimeout": 500000000,
  "ackMaxRetries": 3,
  "enableAck": false,
  "messageRecordTtl": 86400000000000,
  "recordCleanupInterval": 1800000000000,
  "sseHeartbeat": 30000000000,
  "sseTimeout": 120000000000,
  "sseMessageBuffer": 100,
  "redisRepository": {
    "cleanupDaysAgo": 0,
    "enableAutoCleanup": false,
    "onlineStatus": {
      "keyPrefix": "wsc:online_status:",
      "ttl": 90000000000,
      "cleanupDaysAgo": 0,
      "enableAutoCleanup": false
    },
    "stats": {
      "keyPrefix": "wsc:stats:",
      "ttl": 600000000000,
      "cleanupDaysAgo": 0,
      "enableAutoCleanup": false
    },
    "workload": {
      "keyPrefix": "wsc:workload:"
    },
    "offlineMessage": {
      "keyPrefix": "wsc:offline_messages:",
      "queueTTL": 604800000000000,
      "autoStore": true,
      "autoPush": true,
      "maxCount": 50,
      "cleanupDaysAgo": 0,
      "enableAutoCleanup": false
    },
    "pubsub": {
      "enabled": true,
      "namespace": "wsc:pubsub:",
      "maxRetries": 2,
      "retryDelay": 100000000,
      "bufferSize": 100,
      "pingInterval": 10000000000,
      "enableCompression": false,
      "compressionMinSize": 1024
    }
  },
  "performance": {
    "maxConnectionsPerNode": 10000,
    "readBufferSize": 4,
    "writeBufferSize": 4,
    "enableCompression": false,
    "compressionLevel": 6,
    "enableMetrics": true,
    "metricsInterval": 60,
    "enableSlowLog": true,
    "slowLogThreshold": 1000
  },
  "security": {
    "enableAuth": true,
    "enableEncryption": false,
    "enableRateLimit": true,
    "maxMessageSize": 1024,
    "allowedUserTypes": [
      "customer",
      "agent",
      "admin"
    ],
    "blockedIps": [],
    "whitelistIps": [],
    "enableIpWhitelist": false,
    "tokenExpiration": 3600,
    "maxLoginAttempts": 5,
    "loginLockDuration": 300,
    "messageEncryption": {
      "enabled": false,
      "algorithm": "AES-256-GCM",
      "key": "your-32-byte-secret-key-for-aes256",
      "enableKeyRotate": false,
      "keyRotateHours": 24,
      "compress": true,
      "encryptPrefix": "ENC:",
      "backupKeys": 3
    },
    "messageRateLimit": {
      "enabled": true,
      "window": 60000000000,
      "maxMessages": 100,
      "alertThreshold": 80,
      "blockDuration": 300000000000,
      "useRedis": true,
      "redisKeyPrefix": "wsc:rate_limit:",
      "enableEmailAlert": false,
      "emailAlert": {
        "smtpHost": "",
        "smtpPort": 587,
        "username": "",
        "password": "",
        "from": "",
        "to": [],
        "enableTls": true,
        "subjectAlert": "[WebSocketé£æ§é¢„è­¦] ç”¨æˆ·æ¶ˆæ¯é¢‘ç‡å¼‚å¸¸",
        "subjectBlock": "[WebSocketé£æ§å°ç¦] ç”¨æˆ·å·²è¢«å°ç¦",
        "templateAlert": "\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cstyle\u003e\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n        .header { background: #ff9800; color: white; padding: 20px; border-radius: 5px 5px 0 0; }\n        .content { background: #f9f9f9; padding: 20px; border: 1px solid #ddd; border-top: none; }\n        .info-table { width: 100%; border-collapse: collapse; margin: 15px 0; }\n        .info-table td { padding: 10px; border-bottom: 1px solid #ddd; }\n        .info-table td:first-child { font-weight: bold; width: 150px; }\n        .footer { background: #f1f1f1; padding: 15px; text-align: center; font-size: 12px; color: #666; }\n        .warning { background: #fff3cd; border-left: 4px solid #ff9800; padding: 12px; margin: 15px 0; }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \u003cdiv class=\"container\"\u003e\n        \u003cdiv class=\"header\"\u003e\n            \u003ch2\u003eâš ï¸ æ¶ˆæ¯é¢‘ç‡é¢„è­¦ - {{.AppName}}\u003c/h2\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"content\"\u003e\n            \u003cdiv class=\"warning\"\u003e\n                \u003cstrong\u003eç”¨æˆ·æ¶ˆæ¯å‘é€é¢‘ç‡è¾¾åˆ°é¢„è­¦é˜ˆå€¼ï¼Œè¯·å…³æ³¨è¯¥ç”¨æˆ·è¡Œä¸º\u003c/strong\u003e\n            \u003c/div\u003e\n            \u003ctable class=\"info-table\"\u003e\n                \u003ctr\u003e\u003ctd\u003eç”¨æˆ·ID\u003c/td\u003e\u003ctd\u003e{{.UserID}}\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eç”¨æˆ·ç±»å‹\u003c/td\u003e\u003ctd\u003e{{.UserType}}\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eå½“å‰åˆ†é’Ÿæ¶ˆæ¯æ•°\u003c/td\u003e\u003ctd\u003e\u003cstrong style=\"color: #ff9800; font-size: 18px;\"\u003e{{.MinuteCount}} æ¡\u003c/strong\u003e\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eå½“å‰å°æ—¶æ¶ˆæ¯æ•°\u003c/td\u003e\u003ctd\u003e\u003cstrong style=\"color: #ff9800; font-size: 18px;\"\u003e{{.HourCount}} æ¡\u003c/strong\u003e\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eè§¦å‘æ—¶é—´\u003c/td\u003e\u003ctd\u003e{{.TriggerTime}}\u003c/td\u003e\u003c/tr\u003e\n            \u003c/table\u003e\n            \u003cp\u003e\u003cstrong\u003eå»ºè®®æ“ä½œï¼š\u003c/strong\u003e\u003c/p\u003e\n            \u003cul\u003e\n                \u003cli\u003eç«‹å³æ£€æŸ¥è¯¥ç”¨æˆ·çš„æ¶ˆæ¯å†…å®¹\u003c/li\u003e\n                \u003cli\u003eç¡®è®¤æ˜¯å¦ä¸ºæ¶æ„åˆ·å±è¡Œä¸º\u003c/li\u003e\n                \u003cli\u003eå¿…è¦æ—¶è”ç³»ç”¨æˆ·æˆ–æ‰§è¡Œå°ç¦æ“ä½œ\u003c/li\u003e\n            \u003c/ul\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"footer\"\u003e\n            \u003cp\u003eæ­¤é‚®ä»¶ç”± {{.AppName}} è‡ªåŠ¨å‘é€ï¼Œè¯·å‹¿ç›´æ¥å›å¤\u003c/p\u003e\n            \u003cp\u003eGenerated at {{.GenerateTime}}\u003c/p\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/body\u003e\n\u003c/html\u003e",
        "templateBlock": "\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cstyle\u003e\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n        .header { background: #f44336; color: white; padding: 20px; border-radius: 5px 5px 0 0; }\n        .content { background: #f9f9f9; padding: 20px; border: 1px solid #ddd; border-top: none; }\n        .info-table { width: 100%; border-collapse: collapse; margin: 15px 0; }\n        .info-table td { padding: 10px; border-bottom: 1px solid #ddd; }\n        .info-table td:first-child { font-weight: bold; width: 150px; }\n        .footer { background: #f1f1f1; padding: 15px; text-align: center; font-size: 12px; color: #666; }\n        .warning { background: #ffebee; border-left: 4px solid #f44336; padding: 12px; margin: 15px 0; }\n    \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \u003cdiv class=\"container\"\u003e\n        \u003cdiv class=\"header\"\u003e\n            \u003ch2\u003eğŸš« ç”¨æˆ·å·²è¢«å°ç¦ - {{.AppName}}\u003c/h2\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"content\"\u003e\n            \u003cdiv class=\"warning\"\u003e\n                \u003cstrong\u003eç”¨æˆ·æ¶ˆæ¯å‘é€é¢‘ç‡è¶…è¿‡é™åˆ¶ï¼Œå·²è¢«ä¸´æ—¶å°ç¦\u003c/strong\u003e\n            \u003c/div\u003e\n            \u003ctable class=\"info-table\"\u003e\n                \u003ctr\u003e\u003ctd\u003eç”¨æˆ·ID\u003c/td\u003e\u003ctd\u003e{{.UserID}}\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eç”¨æˆ·ç±»å‹\u003c/td\u003e\u003ctd\u003e{{.UserType}}\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eå½“å‰åˆ†é’Ÿæ¶ˆæ¯æ•°\u003c/td\u003e\u003ctd\u003e\u003cstrong style=\"color: #f44336; font-size: 18px;\"\u003e{{.MinuteCount}} æ¡\u003c/strong\u003e\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eå½“å‰å°æ—¶æ¶ˆæ¯æ•°\u003c/td\u003e\u003ctd\u003e\u003cstrong style=\"color: #f44336; font-size: 18px;\"\u003e{{.HourCount}} æ¡\u003c/strong\u003e\u003c/td\u003e\u003c/tr\u003e\n                \u003ctr\u003e\u003ctd\u003eå°ç¦æ—¶é—´\u003c/td\u003e\u003ctd\u003e{{.TriggerTime}}\u003c/td\u003e\u003c/tr\u003e\n            \u003c/table\u003e\n            \u003cp\u003e\u003cstrong\u003eç´§æ€¥å¤„ç†ï¼š\u003c/strong\u003e\u003c/p\u003e\n            \u003cul\u003e\n                \u003cli\u003eç«‹å³å®¡æŸ¥è¯¥ç”¨æˆ·çš„æ‰€æœ‰æ¶ˆæ¯å†…å®¹\u003c/li\u003e\n                \u003cli\u003eè¯„ä¼°æ˜¯å¦éœ€è¦æ°¸ä¹…å°ç¦\u003c/li\u003e\n                \u003cli\u003eé€šçŸ¥ç›¸å…³è¿ç»´äººå‘˜\u003c/li\u003e\n                \u003cli\u003eè®°å½•å¼‚å¸¸è¡Œä¸ºæ—¥å¿—\u003c/li\u003e\n            \u003c/ul\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"footer\"\u003e\n            \u003cp\u003eæ­¤é‚®ä»¶ç”± {{.AppName}} è‡ªåŠ¨å‘é€ï¼Œè¯·å‹¿ç›´æ¥å›å¤\u003c/p\u003e\n            \u003cp\u003eGenerated at {{.GenerateTime}}\u003c/p\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/body\u003e\n\u003c/html\u003e",
        "appName": "WebSocketæ¶ˆæ¯ç³»ç»Ÿ"
      }
    }
  },
  "clientAttributes": {
    "clientIdSources": [
      {
        "type": "query",
        "key": "client_id"
      },
      {
        "type": "header",
        "key": "X-Client-ID"
      }
    ],
    "userIdSources": [
      {
        "type": "query",
        "key": "user_id"
      },
      {
        "type": "header",
        "key": "X-User-ID"
      }
    ],
    "userTypeSources": [
      {
        "type": "query",
        "key": "user_type"
      },
      {
        "type": "header",
        "key": "X-User-Type"
      }
    ]
  },
  "database": {
    "enabled": true,
    "autoMigrate": true,
    "tablePrefix": "wsc_",
    "logLevel": "warn",
    "slowThreshold": 200000000,
    "connectionRecord": {
      "cleanupDaysAgo": 30,
      "enableAutoCleanup": true
    },
    "messageRecord": {
      "cleanupDaysAgo": 7,
      "enableAutoCleanup": true
    },
    "compensation": {
      "enableAutoCompensate": true,
      "scanInterval": 30000000000,
      "batchSize": 120,
      "maxConcurrent": 50,
      "defaultMaxRetry": 5,
      "defaultRetryInterval": 60,
      "defaultPriority": 5,
      "lockTimeout": 300000000000,
      "cleanupDaysAgo": 7,
      "enableAutoCleanup": true
    }
  },
  "logging": {
    "moduleName": "wsc",
    "enabled": true,
    "level": "debug",
    "format": "json",
    "timeFormat": "2006-01-02T15:04:05.999999999Z07:00",
    "output": "stdout",
    "filePath": "/var/log/wsc.log",
    "maxSize": 100,
    "maxBackups": 3,
    "maxAge": 28,
    "compress": true,
    "skipPaths": [
      "/health",
      "/metrics",
      "/favicon.ico",
      "/ping",
      "/readiness",
      "/liveness"
    ],
    "enableRequest": true,
    "enableResponse": false,
    "maxBodySize": 2048,
    "sensitiveMask": "***REDACTED***",
    "sensitiveKeys": [
      "password",
      "passwd",
      "token",
      "access_token",
      "refresh_token",
      "secret",
      "authorization",
      "api_key",
      "apikey",
      "mobile",
      "phone",
      "id_card",
      "credit_card"
    ],
    "slowHttpThreshold": 1000,
    "slowGrpcThreshold": 1000,
    "slowStreamThreshold": 5000,
    "loggableContentTypes": [
      "application/json",
      "application/xml",
      "application/x-www-form-urlencoded",
      "text/"
    ]
  },
  "batchProcessing": {
    "offlineMessageBatchSize": 100,
    "messagePoolBufferSize": 1024,
    "connectionBatchSize": 1000
  },
  "channelBuffers": {
    "broadcastBufferMultiplier": 4,
    "nodeMessageBufferMultiplier": 4
  },
  "retryPolicy": {
    "maxRetries": 3,
    "baseDelay": 100000000,
    "maxDelay": 5000000000,
    "backoffFactor": 2,
    "jitter": true,
    "jitterPercent": 0.1,
    "retryableErrors": [
      "queue_full",
      "timeout",
      "conn_error",
      "channel_closed"
    ],
    "nonRetryableErrors": [
      "user_offline",
      "permission",
      "validation"
    ]
  }
}