# middleware模块配置文件
# 模块名称: middleware
# 包名: middleware  
# 描述: 中间件模块
# 生成时间: 2025-11-28 00:26:08
# 注意: 此文件由配置生成器自动生成

# 模块名称
module-name: middleware
# 是否启用中间件
enabled: true
# 日志中间件
logging:
    # 模块名称
    module-name: logging
    # 是否启用中间件
    enabled: true
    level: info
    format: json
    output: stdout
    file-path: /var/log/app.log
    max-size: 100
    max-backups: 3
    max-age: 28
    compress: true
    skip-paths:
        - /health
        - /metrics
    enable-request: true
    enable-response: false
# 恢复中间件
recovery:
    # 模块名称
    module-name: recovery
    # 是否启用中间件
    enabled: true
    enable-stack: true
    stack-size: 4096
    enable-debug: false
    error-message: 服务器内部错误
    log-level: error
    enable-notify: false
    print-stack: true
# 追踪中间件
tracing:
    # 模块名称
    module-name: tracing
    # 是否启用中间件
    enabled: false
    service-name: go-rpc-gateway
    service-version: 1.0.0
    environment: development
    endpoint: http://localhost:9411/api/v2/spans
    exporter-type: zipkin
    exporter-endpoint: http://localhost:9411/api/v2/spans
    sample-rate: 0.1
    sampler-type: probability
    sampler-probability: 0.1
    sampler-rate: 0.1
    headers:
        - Authorization
        - User-Agent
    attributes: {}
# 指标中间件
metrics:
    # 模块名称
    module-name: metrics
    # 是否启用中间件
    enabled: false
    path: /metrics
    namespace: gateway
    subsystem: http
    skip-paths:
        - /health
    buckets:
        - 0.005
        - 0.01
        - 0.025
        - 0.05
        - 0.1
        - 0.25
        - 0.5
        - 1
        - 2.5
        - 5
        - 10
    request-count: true
    duration: true
    request-size: true
    response-size: true
# 请求ID中间件
request-id:
    # 模块名称
    module-name: requestid
    # 是否启用中间件
    enabled: true
    header-name: X-Request-ID
    generator: uuid
# 国际化中间件
i18n:
    # 模块名称
    module-name: i18n
    # 是否启用中间件
    enabled: false
    default-language: en
    supported-languages:
        - en
        - zh
    language-mapping:
        en-us: en
        zh-cn: zh
    detection-order:
        - header
        - query
        - cookie
        - default
    language-param: lang
    language-header: Accept-Language
    messages-path: ./locales
    custom-message-paths: {}
    enable-fallback: true
    cookie-name: language
# PProf中间件
pprof:
    # 模块名称
    module-name: PProf
    # 是否启用中间件
    enabled: false
    path-prefix: /debug/pprof
    port: 6060
    enable-profiles:
        cpu: true
        memory: true
        goroutine: true
        block: false
        mutex: false
        heap: true
        allocs: true
        threadcreate: false
        trace: false
    sampling:
        cpu-rate: 100
        memory-rate: 524288
        block-rate: 1
        mutex-fraction: 1
    authentication:
        # 是否启用中间件
        enabled: false
        auth-token: ""
        allowed-ips: []
        require-auth: false
        timeout: 30
    gateway:
        # 是否启用中间件
        enabled: false
        dev-mode-only: false
        enable-logging: true
        register-web-interface: true
    web-interface:
        # 是否启用中间件
        enabled: true
        title: PProf Performance Analysis
        description: Go Performance Profiling Interface
        show-scenarios: true
# 断路器配置
circuit-breaker:
    # 模块名称
    module-name: circuit_breaker
    # 是否启用中间件
    enabled: true
    failure-threshold: 5
    success-threshold: 2
    timeout: 30000000000
    volume-threshold: 10
    sliding-window-size: 100
    sliding-window-bucket: 1000000000
    prevention-paths:
        - /api/
    exclude-paths:
        - /health
        - /metrics
        - /debug
# 告警配置
alerting:
    # 模块名称
    module-name: alerting
    # 是否启用中间件
    enabled: false
    webhooks: []
    channels: []
